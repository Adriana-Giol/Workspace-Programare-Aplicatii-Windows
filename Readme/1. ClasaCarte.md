# 1. Clasa Carte
üîÆ[**Cod Sursa**](https://github.com/Adriana-Giol/Workspace-Programare-Aplicatii-Windows/blob/main/WorkspaceProjectCode/Clase/Carte.cs)üîÆ</br>
[üî¥**Definire atribute**](#atribute)
[**üü†Constructori fara/cu parametri**](#Constructor)
[**üü°Proprietati (functii accesor)**](#acces)
[**üü¢To String**](#afisare)
[**üîµICloneable**](#clona)
[**üîµIcomparable**](#compare)
[**üü£Operatori**](#operatori)</br>

1Ô∏è‚É£**PAS 1: Click dreapta pe proiect -> Add -> New Item -> Class**</br>
**SHORTCUT: `CTRL + SHIFT + A`**</br>
*Namespace-ul este acelasi pentru toate clasele - daca luam o clasa dintr-un alt proiect trebuie sa ne asiguram ca namespace-ul se potriveste cu al nostru.*</br>

<a id="atribute"></a>
2Ô∏è‚É£**PAS 2: DEFINIRE ATRIBUTE**</br>
*Fiecare atribut are propriul modificator de acces - default e `private`*. </br>
*Protected ramane cu aceeasi utilitate ca si in C++, adica extinde vizibilitatea atributului si in cadrul claselor derivate. In C# si Java nu exista derivare multipla.*</br>
```Csharp
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace WorkspaceProjectCode.Clase
{
    class Carte
    {
        //***************************** DEFINIRE ATRIBUTE **************
        private string denumire;
        private List<String> autor;
        private string editura;
        private int anAparitie;
        private bool esteImprumutata;
        private DateTime dataImprumut;
        private int[] isbn;
        private float pret;
        private char cutieDepozitare;

        private static int contorCartiDinBiblioteca;
    }
}
```
<a id="Constructor"></a>
3Ô∏è‚É£**PAS 3: CONSTRUCTORUL FARA PARAMETRI**</br>
 - **Daca uitam sa punem public La constructor inseamna ca acel constructor este privat si nu il putem folosi in afara clasei, deci nu putem sa instantiem obiecte. Constructorul privat este necesar doar in cazul unui Singleton.**</br>
 - **"f" vine de la float (virgula mobila simpla precizie) deoarece 0.0 este implicit un double (virgula mobila dubla precizie) si trebuie convertit la float.**</br>
 - **Pointerul this este un pointer catre obiectul curent al clasei. In C# lucram cu referinte, deci this-> este inlocuit de (this.)**</br>

```Csharp
    //************************************* CONSTRUCTOR FARA PARAMETRI ********************************
        public Carte()
        {
            this.denumire = "Necunoscut";
            this.autor = new List<string>(new string[] { "Agatha Cristie", "Dan Brown" });
            this.editura = "Necunoscuta";
            this.anAparitie = 2021;
            this.esteImprumutata = false;
            this.dataImprumut = System.DateTime.Now;
            this.isbn = new int[] { 973, 95056, 0, 6 };
            this.pret = 0.0f;
            this.cutieDepozitare = '1';

            contorCartiDinBiblioteca++;
        }
```


4Ô∏è‚É£**PAS 4: CONSTRUCTORUL CU PARAMETRI**</br>
```Csharp
    //************************************* CONSTRUCTOR CU PARAMETRI - LA VECTORI TREBUIE DEEP COPY*******************
        public Carte(string denumire, List<String> autor, string editura, int anAparitie, bool esteImprumutata,         
                     DateTime dataImprumut, int[] isbn, float pret, char cutieDepozitare)
        {  
            //*************************************** LISTA **************************
            this.autor = new List<string>();
            foreach (String s in autor)
            {
                this.autor.Add(s);
            }

            //************************************* VECTOR *****************************
            // DEEP COPY - VARIANTA 1 - CLASICA
            this.isbn = new int[isbn.Length];
            for(int i = 0; i < isbn.Length; i++)
            {
                this.isbn[i] = isbn[i];
            }

            //DEEP COPY - VARIANTA 2 - CLONE
            this.isbn = (int[])isbn.Clone();

            //************************************** ATRIBUTE SIMPLE ***********************************
            this.denumire = denumire;
            this.editura = editura;
            this.anAparitie = anAparitie;
            this.esteImprumutata = esteImprumutata;
            this.dataImprumut = dataImprumut;
            this.pret = pret;
            this.cutieDepozitare = cutieDepozitare; 

            contorCartiDinBiblioteca++;
        }
```
<a id="clona"></a>
5Ô∏è‚É£**PAS 5: CONSTRUCTORUL DE COPIERE - INTERFATA ICLONEABLE**</br>
**C++: Creaza spatiu pentru un nou obiect in HEAP si va copia in acel spatiu valorile primit ca parametru.**</br>
__DIFERENTA CONSTRUCTOR DE COPIERE - OPERATOR =__</br>
 - Operatorul = foloseste 2 obiecte deja existente si copiaza dintr-unul in altul.</br>
 - Constructorul de copiere creaza un obiect de baza unui deja existent.</br>

**C#: Constructorul de copiere se va inlocuit cu implementarea interfetei ICloneable.**

```Csharp
    //******************************************  ICLONEABLE *************************************
        public object Clone()
        {
            //DACA AVEM DOAR ATRIBUTE SIMPLE
            //return this.MemberwiseClone(); //daca lasam doar asa nu o sa stie sa copieze lista de string-uri

            Carte clona = (Carte)this.MemberwiseClone();

            //PENTRU LISTA
            List<string> autorNou = new List<string>();
            foreach(String s in autor)
            {
                autorNou.Add((string)s.Clone());
            }
            clona.autor = autorNou;

            //PENTRU VECTOR
            int[] ISBNnou = (int[])ISBN.Clone();
            clona.isbn = ISBNnou;
            return clona;
        }
```

<a id="compare"></a>
6Ô∏è‚É£**PAS 6: OPERATOR DE COMPARARE - INTERFATA ICOMPARABLE**</br>
**Operatorii de comparatie (<, >, =) se vor inlocui cu implementarea interfetei IComparable.**</br>

```Charp
        //*************************************  ICOMPARABLE - COMPARE TO() ***************************************
        // COMPARE TO PENTRU STRING
        public int CompareTo(object obj)
        {
            Carte c = (Carte)obj;  //facem CAST

            string denumire1 = this.denumire;
            string denumire2 = c.denumire;

            if (denumire1.Equals(denumire2, StringComparison.OrdinalIgnoreCase))
            {
                return 1; //true
            }
            else
            {
                return -1;//false;
            }

        }

        //COMPARE TO PENTRU  INT/FLOAT
         public int CompareTo(object obj)
           {
               Carte c = (Carte)obj;
               if (this.pret < c.pret)
                   return -1;
               else
                   if (this.pret > c.pret)
                   return 1;
               else
                   return 0; // daca fac compararea dupa un singur criteriu
               return string.Compare(this.denumire, c.denumire); // daca vreau sa fac compararea dupa 2 criterii
           }
```
<a id="acces"></a>
7Ô∏è‚É£**PAS 7: PROPRIETATI - FUNCTII ACCESORI**</br>
**Functiile accesor (get si set) in C# nu se mai implementeaza ca functii, ci se implementeaza ca proprietati. Pentru fiecare atribut PRIVAT, pentru a putea accesa respectivul atribut in afara clasei, este nevoie sa implementam o proprietate.**</br>

 **CONVENTII DE NUME:**</br>
     - Atribut = prima litera mica:  numeStudent</br>
     - Proprietati = nume atribut, dar cu prima litera mare: NumeStudent</br>
     
```Csharp
public string Denumire
   {
       get { return denumire; }
       set
           {
             if (value != null) denumire = value; //value joaca rol de parametru pe care il primeam la seter
           }
  }
```
**Se mai pot folosi si expresii Lambda pentru a reduce volumul codului scris.**</br>
**Click drepata pe atributul caruia vrem sa ii realizam proprietatea -> Quick action and refactorings -> Encapsulate field (but still use field).**</br>

```Csharp
        //*******************************************  PROPRIETATI *************************************************
        public string Denumire { get => denumire; set => denumire = value; }
        public List<string> Autor { get => autor; set => autor = value; }
        public string Editura { get => editura; set => editura = value; }
        public int AnAparitie { get => anAparitie; set => anAparitie = value; }
        public bool EsteImprumutata { get => esteImprumutata; set => esteImprumutata = value; }
        public DateTime DataImprumut { get => dataImprumut; set => dataImprumut = value; }
        public int[] Isbn { get => isbn; set => isbn = value; }
        public float Pret { get => pret; set => pret = value; }
        public char CutieDepozitare { get => cutieDepozitare; set => cutieDepozitare = value; }
    }
```

<a id="afisare"></a>
8Ô∏è‚É£ **PAS 8: FUNCTIE DE AFISARE - CLASICA**</br>
*{0} {1} {2} {3} - joaca rol de indecsi ai listei de parametri care sunt specificati.*</br>

```Csharp
    //******************************************* FUNCTIE DE AFISARE CLASICA *************************************************
        public void afisare()
        {
            Console.WriteLine("Cartea {0} de la editura {1} costa {2}", denumire, editura, pret);
        }
```
 **SUPRAINCARCARE FUNCTIE TO STRING**</br>
*To String o sa substituie de acum inainte functia de afisare.*</br>

```Csharp
        //****************************************** TO STRING ***************************************************
        public override string ToString()
        {
            //Afisare pentru lista
            string afisare1 = "Cartea cu autorii: ";
            foreach (string s in autor)
            {
                afisare1 += s.ToString();
            }

            //Afisare pentru vector
            if (isbn != null)
            {
                afisare1 += " are urmatorul ISBN: ";
                for (int i = 0; i < isbn.Length; i++)
                    afisare1 += isbn[i] + Environment.NewLine;
            }
            else
                afisare1 += " .";

            //Afisare pentru atribute normale
            string afisare3 = "Cartea " + denumire + ","
                    + " este imprumutata = " + esteImprumutata + " de la data de " + dataImprumut
                    + " fiind tiparita la editura " + editura
                    + " in anul " + anAparitie
                    + " si avand pretul de " + pret + " lei."
                    + " Aceasta se afla depozitata in cutia " + cutieDepozitare;


            return afisare1 += afisare3;
        }
```
